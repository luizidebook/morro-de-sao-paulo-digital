<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#3b82f6" />
    <meta name="msapplication-navbutton-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-status-bar-style" content="#3b82f6">
    <meta
      name="description"
      content="Guia digital interativo de Morro de S√£o Paulo"
    />
    <title>Morro Digital</title>
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/components/map/map-rotation.css" />


<!-- Carregar Leaflet primeiro (vers√£o √∫nica) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<!-- Carregar apenas uma vers√£o do Leaflet -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- Adicionar plugins necess√°rios para rota√ß√£o -->
<script src="./js/plugins/leaflet.rotatedMarker.js"></script>
<script src="./js/plugins/leaflet.mapbearing.js"></script>
<!-- Carregar o plugin polylineDecorator apenas uma vez -->
<script src="./js/lib/leaflet.polylineDecorator.js"></script>

<link
rel="stylesheet"
href="https://unpkg.com/swiper/swiper-bundle.min.css"
/>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>

  <body>
    <!-- App Shell -->
    <div class="app-shell">
      <!-- Cabe√ßalho -->
      <header>
        <div class="header-content">
          <h1 data-i18n="welcome_message">Morro Digital</h1>
          <p class="tagline" data-i18n="ask_first_time">Descubra o para√≠so</p>
        </div>
      </header>

      <!-- Mapa -->
        <div id="map-container">
          <div id="map"></div>
          <!-- O widget ser√° inserido aqui -->
        </div>
      </section>

      <!-- Submenu din√¢mico -->
      <section id="submenu" class="hidden">
        <div class="submenu-header">
          <h3 class="submenu-title">Explorar Locais</h3>
          <button class="close-button" aria-label="Fechar menu">√ó</button>
        </div>
        <div id="submenuContainer" aria-live="polite"></div>
      </section>

<!-- Quick Action Buttons -->
<div class="quick-actions">
  <button class="action-button primary mood-button" data-mood="happy">
    <img class="mood-icon" src="./assets/emojis/sun_emojis/sun_emoji_1.png" alt="Humor do assistente">
  </button>
</div>

      <!-- Assistente Virtual -->            
      <div id="assistant-messages" class="assistant-modal hidden">
        <button class="minimize-button" aria-label="Minimizar assistente">√ó</button>
        <div class="messages-area"></div>
    <!-- Quando em modo normal -->
    <div class="message assistant" data-message-type="standard"></div>
    <!-- Quando em modo de navega√ß√£o -->

      <!-- Carrossel sem espa√ßos desnecess√°rios -->
  <div class="carousel-container">
    <div class="swiper-container">
      <!-- Conte√∫do do swiper -->
    </div>
    <div class="carousel-info-text">Primeira Praia</div>
  </div>
  
  <!-- Mensagem de seguimento compacta, sem espa√ßos extras -->
  <div class="message assistant carousel-follow-up">
    Gostaria de mais informa√ß√µes, como chegar ou ver outro local?
  </div>
  <!-- Mensagem de navega√ß√£o, com espa√ßo para instru√ß√µes -->
  <div class="navigation-instruction-area"></div></div>      
<!-- Campo de input do assistente, fora do bal√£o -->
<div id="assistant-input-area" class="assistant-input-area">
  <input
    type="text"
    id="assistantInput"
    placeholder="Pergunte algo sobre Morro de S√£o Paulo..."
    aria-label="Campo de entrada do assistente"
  />
  <button id="sendButton" aria-label="Enviar mensagem">
    <i class="fas fa-paper-plane"></i>
  </button>
  <button id="voiceButton" aria-label="Enviar mensagem de voz">
    <i class="fas fa-microphone"></i>
  </button>
  <button id="configButton" aria-label="Configura√ß√µes do assistente">
    <i class="fas fa-cog"></i>
  </button>
</div>
       

<div id="instruction-banner" class="instruction-banner hidden">
  <div class="instruction-primary">
    <span id="instruction-arrow">‚¨ÜÔ∏è</span>
    <h2 id="instruction-main">Siga em frente</h2>
    <button id="minimize-navigation-btn" aria-label="Minimizar instru√ß√µes de navega√ß√£o" aria-expanded="true"></button>
  </div>
  <div class="instruction-secondary">
    <p id="instruction-details">200m - Rua Caminho do Farol</p>
    <div class="instruction-extra">
      <p id="instruction-distance">üìè: 200m</p>
      <p id="instruction-time">‚è±Ô∏è: 2 minutos</p>
    </div>
    <!-- Adicionar o elemento de progresso que est√° faltando -->
    <div id="route-progress-container">
      <progress id="route-progress" value="0" max="100"></progress>
      <span id="progress-text">0%</span>
    </div>
  </div>
</div>

    <!-- Loading Overlay -->
    <div id="loading-overlay">
      <div class="loading-content">
        <div class="spinner"></div>
        <p>Carregando Morro Digital...</p>
      </div>
    </div>

    <!-- Scripts principais -->
    <script type="module" src="./main.js"></script>
    <script>
      // Remove loading overlay when content loads
      window.addEventListener("load", function () {
        setTimeout(function () {
          document.getElementById("loading-overlay").classList.add("fade-out");
        }, 800);
      });

    </script>

    <!-- No final do seu index.html, antes de fechar o </body> -->
<script type="module">
  // Garantir que todos os m√≥dulos de navega√ß√£o sejam carregados
  import './js/navigation/navigationIntegration.js';
  
  // Certificar que as fun√ß√µes de navega√ß√£o estejam dispon√≠veis globalmente
  document.addEventListener('DOMContentLoaded', () => {
    // Verificar se o sistema de navega√ß√£o est√° dispon√≠vel
    if (typeof window.startNavigation !== 'function') {
      console.error('Sistema de navega√ß√£o n√£o carregado corretamente!');
    } else {
      console.log('Sistema de navega√ß√£o inicializado com sucesso!');
    }
  });
</script>
  </body>
</html>

